<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>

<head>
    <meta charset="UTF-8">
    <title>MetaStorm | upload dataset</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.4 -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='template/bootstrap/css/bootstrap.min.css') }}"></link>
    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='template/dist/css/AdminLTE.css') }}"></link>
    <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
          page. However, you can choose any other skin. Make sure you
          apply the skin class to the body tag so the changes take effect.
    -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='template/dist/css/skins/skin-blue.min.css') }}"></link>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- pretty tables -->
    <!-- <link href="https://handsontable.com//bower_components/handsontable/dist/handsontable.full.min.css" rel="stylesheet">
    <script src="https://handsontable.com//bower_components/handsontable/dist/handsontable.full.min.js"></script>
    <script src="https://handsontable.com//bower_components/ruleJS/dist/full/ruleJS.all.full.js"></script>
    <script src="https://handsontable.com//bower_components/handsontable-ruleJS/src/handsontable.formula.js"></script> -->


    <link href="https://docs.handsontable.com/2.0.0/bower_components/handsontable/dist/handsontable.full.min.css" rel="stylesheet">
    <script src="https://docs.handsontable.com/2.0.0/bower_components/handsontable/dist/handsontable.full.min.js"></script>


    <script>
        var $SCRIPT_ROOT = {
            {
                request.script_root | tojson | safe
            }
        };
    </script>


</head>
<!--
  BODY TAG OPTIONS:
  =================
  Apply one or more of the following classes to get the
  desired effect
  |---------------------------------------------------------|
  | SKINS         | skin-blue                               |
  |               | skin-black                              |
  |               | skin-purple                             |
  |               | skin-yellow                             |
  |               | skin-red                                |
  |               | skin-green                              |
  |---------------------------------------------------------|
  |LAYOUT OPTIONS | fixed                                   |
  |               | layout-boxed                            |
  |               | layout-top-nav                          |
  |               | sidebar-collapse                        |
  |               | sidebar-mini                            |
  |---------------------------------------------------------|
  -->

<body class="skin-blue sidebar-mini">
    <div class="wrapper">

        <!-- Main Header -->
        <header class="main-header">

            <!-- Logo -->
            <a href="" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><b>M</b>S</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>Meta</b>Storm</span>
            </a>

            <!-- Header Navbar -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">Toggle navigation</span>
                </a>
                <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">

                        <!-- Tasks Menu -->

                        <!-- Control Sidebar Toggle Button -->
                        <li>
                            <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">

            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">

                <!-- Sidebar user panel (optional) -->
                <div class="user-panel" style="height:100px">
                    <div class="pull-left image">
                        <img src="/MetaStorm/static/template/dist/img/user.png" class="img-circle" alt="User Image" />
                    </div>
                    <div class="pull-left info">
                        <p id="UserName1"></p>
                        <p id="userID"></p>
                        <p id="UserContact"></p>
                    </div>
                </div>

                <!-- search form (Optional) -->
                <form action="#" method="get" class="sidebar-form">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="Search..." />
                        <span class="input-group-btn">
                <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i></button>
              </span>
                    </div>
                </form>
                <!-- /.search form -->

                <!-- Sidebar Menu -->
                <ul class="sidebar-menu">

                </ul>
                <!-- /.sidebar-menu -->
            </section>
            <!-- /.sidebar -->
        </aside>




































        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper" style="height:auto; overflow:auto">
            <!-- Content Header (Page header) -->



            </section>
            <!-- /.content -->





            <div class="col-md-12">
                <div class="box" id="" style='background:url("/MetaStorm/static/template/dist/img/pattern1.jpg");'>
                    <div class="box-header">
                        <h3 class="box-title"></h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                        </div>
                        <!-- /.box-tools -->
                    </div>
                    <!-- /.box-header -->
                    <br>
                    <div class="box-body">
                        <center>
                            <h1 style='font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif; color:rgba(255,255,255,0.9)'>Upload your own reference database
                    </div>
                    <br><br><br>

                </div>
                <!-- /.box -->
            </div>






            <section>
                <div class="col-md-6">
                    <div class="box box-solid box-info" id="ProjectStatus">
                        <div class="box-header">
                            <h3 class="box-title">Dataset information</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            </div>
                            <!-- /.box-tools -->
                        </div>
                        <!-- /.box-header -->

                        <div class="box-body">
                            <p>Submit your own reference data set.</p>

                            <label for="rname">Dataset name:</label>
                            <input class="form-control" type="text" id="rname" name="rname"></input>

                            <label for="rname">Sequence type (prot/nucl):</label>
                            <input class="form-control" type="text" id="rtype" name="rtype"></input>

                            <label for="rname">Dataset detailed description:</label>
                            <textarea style="height:200px" class="form-control" type="text" id="rdesc" name="rdesc"></textarea>

                            <div class="box-footer">
                                <button id="register_dataset" type="button" class="btn btn-primary">Register reference</button>
                                <div>
                                </div>
                            </div>
                            <!-- /.box -->
                        </div>

            </section>
            <section>
                <div class="col-md-6">
                    <div class="box box-solid box-info" id="upload_data_panel">
                        <div class="box-header">
                            <h3 class="box-title">Setup file information</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            </div>
                            <!-- /.box-tools -->
                        </div>
                        <!-- /.box-header -->


                        <div class="box-body">
                            <form id="upload-file" method="post" enctype="multipart/form-data">
                                <fieldset>
                                    <label for="file">Upload Files</label>
                                    <input data-buttonBefore="true" data-buttonName="btn-info" class="filestyle" name="file" type="file">
                                    <input id="uinfo" type="text" name="rid" hidden>
                                </fieldset>
                            </form>
                        </div>

                        <div class="box-footer">
                            <button id="upload-file-btn" type="button" class="btn btn-primary">Upload</button>

                        </div>

                        <div class="box-body">
                            <select class="form-control" id='rsequences'>
                     <option>Reference Sequence File</option>
                   </select>
                            <select class="form-control" id='rtaxonomy'>
                     <option>Reference Taxonomy File</option>
                     <option value="none">none</option>
                   </select>
                            <select class="form-control" id='rfunction'>
                     <option>Reference Function File</option>
                     <option value="none">none</option>
                   </select>
                        </div>

                        <div class="box-footer">
                            <button id="process_data_set" type="button" class="btn btn-primary">Process</button>
                        </div>



                    </div>
                    <!-- /.box -->

            </section>
            <section>

                <div class="col-md-12">
                    <div class="box box-solid box-info" id="RefDatabaseUploadInstruction">
                        <div class="box-header">
                            <h3 class="box-title">Reference Database Upload Instructions</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            </div>
                            <!-- /.box-tools -->
                        </div>
                        <!-- /.box-header -->


                        <div class="box-body">
                            <p>
                                First prepare the database in the required format. MetaStorm requires the next files for setting up the database. Depending on the type of database (taxonomy or annotation), you need to provide a file that contains the taxonomy or the functions for each
                                gene as follows:
                                <div class="container" style="margin-left:0">
                                    1. Gene database <b>(Mandatory)</b>. A fasta file where the header corresponds to the gene id e.g.,
                                    <div class="container" style="margin-left:0;color:#3c8dbc;">
                                        &gtgene_0001<br/> ACCTGAGGTCATACAGACATAGCACACAGATACAGATACAGATAGAC
                                        <br/> &gtgene_0002
                                        <br/> ACCTGAGGTCATACAGACATAGCACACAGATACAGATACAGATAGAC
                                        <br/> &gtgene_0003
                                        <br/> ACCTGAGGTCATACAGACATAGCACACAGATACAGATACAGATAGAC
                                    </div>
                                </div>
                                <div class="container" style="margin-left:0">
                                    2. Taxonomy link file: A tab delimited file containing the gene id and the full taxonomy (as in SILVA database) separated by “;”. For instance:
                                    <div class="container" style="margin-left:0;color:#3c8dbc;">
                                        gene_001 Bacteria;Proteobacteria;Betaproteobateria;Neisseriales;Neisseriaceae;Neiseria;Neiseria-Meningitidis<br/> gene_002 Bacteria;Proteobacteria;Betaproteobateria;Neisseriales;Neisseriaceae;Neiseria;Neiseria-Meningitidis<br/>                                        gene_003 Bacteria;Proteobacteria;Betaproteobateria;Neisseriales;Neisseriaceae;Neiseria;Neiseria-Meningitidis
                                    </div>
                                </div>
                                <div class="container" style="margin-left:0; width:auto">
                                    3. Functional link file: A tab delimited file similar to the taxonomy file, containing the function class or category. If a gene contains multiple functional associations, put all of them in different lines, for instance:
                                    <div class="container" style="margin-left:0;color:#3c8dbc;">
                                        gene_001 Transcription<br/> gene_002 Transcription<br/> gene_002 RNA-Binding<br/> gene_003 DNA-Repair
                                    </div>
                                </div>
                                <div class="container" style="margin-left:0">
                                    4. Description File (mandatory): Upload a tab delimited file named "dataset.description" containing the description of the functional categories as follows:
                                    <div class="container" style="color:#3c8dbc;">
                                        Transcription GO:0003700 transcription factor activity, sequence-specific DNA binding<br/> Membrane GO:0005737 Cellular component<br/> DNARepair GO:0006281 The process of restoring DNA after damage.<br/>
                                    </div>
                                    * descriptions are shown for illustration, the 2nd and 3rd fields can be filled with a more comprehensive description.
                                </div>
                                <br/> In order to setup your <u>new dataset</u> you need to follow the next steps:
                                <div class="container" style="margin-left:0">
                                    1. Click on <u>Submit a reference dataset</u> under the <u>Customize Reference Database</u> box<br/> 2. Fill out the form with the required information:
                                    <div class="container">
                                        a. <b>Dataset name:</b> Type the name of your reference dataset<br/> b. <b>Sequence type:</b> Type if it is a gene or protein database.<br/> c. <b>Description:</b> IMPORTANT Insert the full description of the dataset
                                    </div>
                                    3. Click on <u>register reference</u><br/> 4. Upload the files<br/> 5. Choose the corresponding file for each type (Sequences, Taxnomy, Function)<br/> 6. Click on process.
                                </div>
                            </p>

                            Check <a href='https://bench.cs.vt.edu/Projects/dataset.zip'>this sample</a> file for testing the reference upload tool

                        </div>
                    </div>

                </div>
                </div>

            </section>




            </div>
            <!-- /.content-wrapper -->


































            <!-- Main Footer -->
            <footer class="main-footer">
                <!-- To the right -->
                <div class="pull-right hidden-xs">
                    Computer Science department VT
                </div>
                <!-- Default to the left -->
                <strong>Copyright &copy; 2015 <a href="#">Virginia Tech</a>.</strong> All rights reserved.
            </footer>

            <!-- Control Sidebar -->
            <aside class="control-sidebar control-sidebar-dark control-sidebar-close">
                <!-- Create the tabs -->
                <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
                    <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
                    <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <!-- Home tab content -->
                    <div class="tab-pane active" id="control-sidebar-home-tab">


                        <ul class="control-sidebar-menu">
                            <li>
                                <a href="javascript::;">
                                    <h4 class="control-sidebar-subheading">
                                        Project Setup
                                        <span id="StatusBarLabel" class="label label-danger pull-right">0%</span>
                                    </h4>
                                    <div class="progress progress-xxs" id='StatusBar'>
                                        <div class="progress-bar progress-bar-danger" style="width: 0%"></div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                        <!-- /.control-sidebar-menu -->


                        <h3 class="control-sidebar-heading">Terminology</h3>
                        <ul class="control-sidebar-menu">
                            <li>
                                <div>

                                    <p>This section help you to get started on completing the data parameters associated to your samples.</p>

                                    <ul>
                                        <li><b>Project</b> - a set of samples comprising different conditions</li>
                                        <li><b>Sample</b> - a single entity that has been obtained for analysis</li>
                                        <li><b>Environment</b> - the characteristics which describe the environment in which your samples were obtained </li>
                                        <li><b>Sample set</b> - a group of samples sharing the same library and environmental characteristics</li>
                                        <li><b>Library preparation</b> - Environmental package the sample belongs to. (metagenome, meta transcriptome, amplicon metagenome 16s)</li>
                                        <li><b>Reads 1-2</b> - The file names corresponding to the data from your library (fasq-fasta format). Be aware that this name has to be </strong>EXACTLY</strong> the same as the file you will upload.</li>
                                    </ul>
                                </div>
                            </li>

                        </ul>

















                    </div>
                    <!-- /.tab-pane -->
                    <!-- Stats tab content -->
                    <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
                    <!-- /.tab-pane -->
                    <!-- Settings tab content -->
                    <div class="tab-pane" id="control-sidebar-settings-tab">
                        <form method="post">
                            <h3 class="control-sidebar-heading">General Settings</h3>
                            <div class="form-group">
                                <label class="control-sidebar-subheading">
                  Report panel usage
                  <input type="checkbox" class="pull-right" checked />
                </label>
                                <p>
                                    Some information about this general settings option
                                </p>
                            </div>
                            <!-- /.form-group -->
                        </form>
                    </div>
                    <!-- /.tab-pane -->
                </div>
            </aside>
            <!-- /.control-sidebar -->
            <!-- Add the sidebar's background. This div must be placed
           immediately after the control sidebar -->
            <div class="control-sidebar-bg"></div>
            </div>
            <!-- ./wrapper -->

























            <!-- REQUIRED JS SCRIPTS -->

            <!-- jQuery 2.1.4 -->
            <script type="text/javascript" src="{{ url_for('static', filename='template/plugins/jQuery/jQuery-2.1.4.min.js') }}"></script>
            <!-- Bootstrap 3.3.2 JS -->
            <script type="text/javascript" src="{{ url_for('static', filename='template/bootstrap/js/bootstrap.min.js') }}"></script>
            <!-- AdminLTE App -->
            <script type="text/javascript" src="{{ url_for('static', filename='template/dist/js/app.min.js') }}"></script>
            <!-- Bootstrap 3.3.2 JS -->
            <script type="text/javascript" src="{{ url_for('static', filename='template/bootstrap/js/bootstrap-filestyle.min.js') }}"></script>
            <!--main js file-->
            <script type="text/javascript" src="{{ url_for('static', filename='js/common.js') }}"></script>
            <script type="text/javascript" src="{{ url_for('static', filename='js/upload_reference_dataset.js') }}"></script>

            <!-- Optionally, you can add Slimscroll and FastClick plugins.
          Both of these plugins are recommended to enhance the
          user experience. Slimscroll is required when using the
          fixed layout. -->
</body>

</html>